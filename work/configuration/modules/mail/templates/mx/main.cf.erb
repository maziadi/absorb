# See /usr/share/postfix/main.cf.dist for a commented, more complete version

# Debian specific:  Specifying a file name will cause the first
# line of that file to be used as the name.  The Debian default
# is /etc/mailname.
#myorigin = /etc/mailname

inet_protocols = all
smtpd_banner = $myhostname ESMTP $mail_name
biff = no

# appending .domain is the MUA's job.
append_dot_mydomain = no

# Uncomment the next line to generate "delayed mail" warnings
#delay_warning_time = 4h

myhostname = <%= hostname %>.alphalink.fr 
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = /etc/mailname
mydestination = <%= postfix_mydestination.join(', ') %> 
relayhost =
mynetworks = <%= postfix_mynetworks.join(', ') %> 
recipient_delimiter = +
inet_interfaces = <%= service_addr %> <%= interco_av_addr %> 
bounce_queue_lifetime = 2d

relay_domains = hash:/etc/postfix/transport 
transport_maps = hash:/etc/postfix/transport

# filtering
content_filter = scan:<%= mail_filter_addr %>:10024
receive_override_options = no_address_mappings

# restrictions
smtpd_client_restrictions = 
    check_client_access hash:/etc/postfix/rbl_whitelist,
<% if i_am_mx -%>
    reject_unknown_reverse_client_hostname,
<% end -%>
    reject_rbl_client bl.spamcop.net,
    reject_rbl_client cbl.abuseat.org
smtpd_sender_restrictions = 
    hash:/etc/postfix/sender_access,
    permit_mynetworks,
<% if greylist -%>
    check_policy_service inet:127.0.0.1:10023,
<% end -%>
    reject_unknown_sender_domain
message_size_limit = 15000000

<% if enable_slow_queue %>
slow_destination_recipient_limit = 20
slow_destination_concurrency_limit = 1
<% end %>
