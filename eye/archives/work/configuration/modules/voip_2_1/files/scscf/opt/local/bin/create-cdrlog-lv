#!/bin/bash

vg_name=`vgdisplay -c | cut -d : -f 1 | sed 's/^ *//g'`
lvcreate -L 20G -n data ${vg_name} || exit -1
vg_name=${vg_name/-/--}
mkfs.xfs /dev/mapper/${vg_name}-data || exit -2
if [ ! -d /data ]; then
  mkdir -p /data || exit -3
fi
echo "/dev/mapper/${vg_name}-data /data xfs defaults 0 2" >> /etc/fstab || exit -4
mount /data || exit -5
