<?xml version="1.0"?>
<?castor class-name="org.opennms.netmgt.collectd.CollectdConfiguration"?>
<collectd-configuration 
	threads="50">
 
<!-- ============================ ALL OID (default) ===================================== -->
<!-- cet collection collectionne:                                                         -->
<!-- par defaut les graphs de tout les OID qui sont trouves sur le node sont collectionees-->
<!-- On n'utilse pas cet collection (tout les nodes sont exclus dans cette collection.    -->
<!-- Les nodes doivent etre ajoutees dans les autres 'collection packages'                -->

	<package name="allOID">
		<filter>IPADDR != '0.0.0.0'</filter>	 
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.alloid</include-url>

		<service name="SNMP" interval="300000" user-defined="false" status="on">
			<parameter key="collection" value="default"/>
      <parameter key="thresholding-enabled" value="true"/>
		</service>

		<service name="WMI" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="default"/>
		</service>

		<service name="XMP" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="default"/>
		</service>
  </package>

<!-- ======================================= base ======================================= -->
<!-- cet collection collectionne:                                                         -->
<!-- Context, Num of process, Num of users, Interrupts, system uptime, LoadAverage        -->
<!-- Swap, System memory stats, CPU usage, CPU statistics                                 -->

  <package name="base">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.base</include-url>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="base"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="base"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="base"/>
    </service>
	</package>

<!-- ================================= INTERFACES ======================================= -->
<!-- cet collection collectionne:                                                         -->
<!-- Interfaces statistiques:                                                             -->
<!-- In, Out Bytes, Errors,                                                               -->

  <package name="interfaces">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.interfaces</include-url>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="interfaces"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="interfaces"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="interfaces"/>
    </service>
	</package>

<!-- ============================ INTERFACES 95 percentile ============================== -->
<!-- cet collection collectionne:                                                         -->
<!-- Interfaces statistiques:                                                             -->
<!-- In, Out Bytes, Errors,                                                               -->
<!-- Ce package doit etre utilise si vous pensez de compter 95 percentile des valeurs     -->

  <package name="interfaces95">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.interfaces95</include-url>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="interfaces95"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="interfaces95"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="interfaces95"/>
    </service>
	</package>

<!-- ====================================== SAN ========================================= -->
<!-- cet collection collectionne:                                                         -->
<!-- drbd0, drbd1 (index diskDevice.33 et 34)                                             -->

	<package name="san">
		<filter>IPADDR != '0.0.0.0'</filter>	 
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <specific>169.254.0.89</specific>
		
		<service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="san"/>
      <parameter key="thresholding-enabled" value="true"/>
		</service>

		<service name="WMI" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="san"/>
		</service>

		<service name="XMP" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="san"/>
		</service>
	</package>

<!-- ================================= mon-1-grp-alpha ================================== -->
<!-- cet collection collectionne:                                                         -->
<!-- disk IO index diskDevice.19 et 20                                                    -->

	<package name="OpenNMSmon">
		<filter>IPADDR != '0.0.0.0'</filter>	 
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <specific>217.15.80.78</specific>
		
		<service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="OpenNMSmon"/>
      <parameter key="thresholding-enabled" value="true"/>
		</service>

		<service name="WMI" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="OpenNMSmon"/>
		</service>

		<service name="XMP" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="OpenNMSmon"/>
		</service>
	</package>

<!-- ======================================= voip ======================================= -->
<!-- cet collection collectionne:                                                         -->
<!-- resultats des scripts: mib_callweaver.sh et mib_ifInfo.rb                            -->

	<package name="voip">
		<filter>IPADDR != '0.0.0.0'</filter>	 
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.voip</include-url>

	<service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="voip"/>
      <parameter key="thresholding-enabled" value="true"/>
		</service>

		<service name="WMI" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="voip"/>
		</service>

		<service name="XMP" interval="300000" user-defined="false" status="off">
			<parameter key="collection" value="voip"/>
		</service>
  </package>


<!-- ======================================= av-1-cbv1 ================================== -->
<!-- cet collection collectionne:                                                         -->
<!-- sda1, sda2 (index diskDevice.18 et 19)                                               -->
<!-- storage size de volume /var/lib/amavis (hrStorageIndex.7)                            -->

  <package name="av-1-cbv1">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <specific>169.254.0.165</specific>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="av-1-cbv1"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="av-1-cbv1"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="av-1-cbv1"/>
    </service>
	</package>

<!-- ======================================= av-1-cbv2 ================================== -->
<!-- cet collection collectionne:                                                         -->
<!-- sda1, sda2 (index diskDevice.19 et 20)                                               -->
<!-- storage size de volume /var/lib/amavis (hrStorageIndex.7)                            -->

  <package name="av-1-cbv2">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <specific>169.254.1.165</specific>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="av-1-cbv2"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="av-1-cbv2"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="av-1-cbv2"/>
    </service>
	</package>

<!-- ======================================= APC ======================================== -->
<!-- cet collection collectionne:                                                         -->
<!-- le currant consome en Amperes                                                       -->

  <package name="APC">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.apc</include-url>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="apc"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="apc"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="apc"/>
    </service>
	</package>

<!-- =============================== serveur backup ===================================== -->
<!-- cet collection collectionne:                                                         -->
<!-- DiskSpace data/backup0 et /data/backup1 (hrStorage.6 et hrStorage.7                  -->

  <package name="ServerBackup">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <specific>10.0.44.13</specific>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="ServerBackup"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="ServerBackup"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="ServerBackup"/>
    </service>
	</package>

<!-- =============================== Switches Foundry =================================== -->
<!-- cet collection collectionne:                                                         -->

  <package name="SwitchesFoundry">
    <filter>IPADDR != '0.0.0.0'</filter>
    <exclude-range begin="0.0.0.0" end="255.255.255.255"/>
    <include-url>file:/opt/local/share/opennms/nodes.switches.foundry</include-url>

    <service name="SNMP" interval="300000" user-defined="false" status="on">
      <parameter key="collection" value="SwitchesFoundry"/>
      <parameter key="thresholding-enabled" value="true"/>
    </service>
    <service name="WMI" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="SwitchesFoundry"/>
    </service>
    <service name="XMP" interval="300000" user-defined="false" status="off">
      <parameter key="collection" value="SwitchesFoundry"/>
    </service>
	</package>

<!-- ==================================================================================== -->
	<collector service="SNMP" class-name="org.opennms.netmgt.collectd.SnmpCollector"/>
	<collector service="WMI"  class-name="org.opennms.netmgt.collectd.WmiCollector"/>
	<collector service="XMP"  class-name="org.opennms.netmgt.collectd.XmpCollector"/>
</collectd-configuration>

