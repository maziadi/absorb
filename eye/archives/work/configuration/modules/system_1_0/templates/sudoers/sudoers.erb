# /etc/sudoers
#
# This file MUST be edited with the 'visudo' command as root.
#
# See the man page for details on how to write a sudoers file.
#

Defaults	env_reset
<% if lsbdistcodename == "wheezy" -%>
Defaults  secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
<% end -%>

# Host alias specification
Host_Alias SI = si-1-cbv1, si-3-pornic
Host_Alias CALLWEAVER = !ALL
Host_Alias ASTERISK = gw-isdn-1-cbv1, gw-isdn-2-cbv2, mgcf-ss7-1-cbv1, mgcf-ss7-2-cbv2, mgcf-ss7-3-cbv1, mgcf-ss7-4-cbv2, mgcf-ss7-5-cbv1, mgcf-ss7-6-cbv1, mgcf-ss7-7-cbv2, mgcf-ss7-8-tco, mgcf-ss7-9-tco, mrf-1-cbv1, mrf-2-cbv1, mrf-3, mrf-4, mrf-5-ext1, mrf-6, mrf-7, mrf-8, mrf-9, mrf-11, mrf-12, mrf-13, mrf-14, mrf-15, mrf-16, mrf-17, mrf-18, mrf-19, mrf-20, mrf-21, mrf-22, mrf-23, mrf-24, mrf-25, mrf-26, mrf-27
Host_Alias BUILDER = builder-1-grp-alpha, builder-2-grp-alpha
Host_Alias BACKUPPC = samba-amelleretdubois, backup-amelleretdubois 

# User alias specification
User_Alias DEVS = j.giovinazzo, j.lefeuvre, d.broeglin

# Cmnd alias specification
Cmnd_Alias SI_CMD = /opt/local/bin/import_data_si, /opt/local/bin/export_data_si

# User privilege specification
root	ALL=(ALL) ALL
rails	si-1-cbv1=(ALL) ALL

# 
# Devs
#
DEVS 	SI = (root) NOPASSWD: SI_CMD 
DEVS 	si-2-pornic = (root) NOPASSWD: ALL 

backuppc  BACKUPPC=NOPASSWD: /usr/bin/rsync

%devel  BUILDER = (root) NOPASSWD: ALL
%admin   ALL  = (root) NOPASSWD: ALL

%zimbra   ALL=NOPASSWD:/opt/zimbra/openldap/libexec/slapd
%zimbra   ALL=NOPASSWD:/opt/zimbra/libexec/zmslapd
%zimbra   ALL=NOPASSWD:/opt/zimbra/libexec/zmstat-fd *
%zimbra   ALL=NOPASSWD:/opt/zimbra/postfix/sbin/postfix, /opt/zimbra/postfix/sbin/postalias, /opt/zimbra/postfix/sbin/qshape.pl, /opt/zimbra/postfix/sbin/postconf,/opt/zimbra/postfix/sbin/postsuper
%zimbra   ALL=NOPASSWD:/opt/zimbra/libexec/zmqstat,/opt/zimbra/libexec/zmmtastatus
%zimbra   ALL=NOPASSWD:/opt/zimbra/libexec/zmmailboxdmgr
%zimbra   ALL=NOPASSWD:/opt/zimbra/bin/zmcertmgr
%zimbra   ALL=NOPASSWD:/opt/zimbra/nginx/sbin/nginx

snmp    CALLWEAVER=NOPASSWD:/usr/sbin/callweaver -rnx *
snmp    CALLWEAVER=NOPASSWD:/usr/bin/lsof -p *
snmp    ASTERISK=NOPASSWD:/usr/sbin/asterisk -rnx *
snmp    ASTERISK=NOPASSWD:/usr/bin/lsof -p *

# configuration interface for proxy can restart dansguardian service
dansconfig ALL = (ALL) NOPASSWD: /etc/init.d/dansguardian
